---
title: Configuration
---

When running `rollipop` from the command line, Rollipop will automatically try to resolve a config file named `rollipop.config.ts` inside project root (other JS and TS extensions are also supported).

## `defineConfig`

`defineConfig` is a helper function that provides type hints for configuration. It accepts either a static configuration object or a function that returns a configuration.

### Static Configuration

```ts title="rollipop.config.ts"
import { defineConfig } from 'rollipop';

export default defineConfig({
  // ...
});
```

### Dynamic Configuration

You can also pass a function to `defineConfig` for dynamic configuration based on the current context:

```ts title="rollipop.config.ts"
import { defineConfig } from 'rollipop';

export default defineConfig((context) => {
  return {
    ...context.defaultConfig,
    mode: context.command === 'build' ? 'production' : 'development',
  };
});
```

**DefineConfigContext:**

| Property        | Type                  | Description                                                                                                 |
| --------------- | --------------------- | ----------------------------------------------------------------------------------------------------------- |
| `command`       | `string \| undefined` | The current CLI command being executed (e.g., `'serve'`, `'build'`). May be `undefined` if not run via CLI. |
| `defaultConfig` | `DefaultConfig`       | The default configuration object provided by Rollipop. Useful for extending defaults.                       |

The function can also be async:

```ts title="rollipop.config.ts"
import { defineConfig } from 'rollipop';

export default defineConfig(async (context) => {
  const customPlugins = await loadPlugins();

  return {
    ...context.defaultConfig,
    plugins: customPlugins,
  };
});
```

## root

- **Type:** `string`
- **Default:** `process.cwd()`

Project root directory. All relative paths in the configuration will be resolved from this directory.

## mode

- **Type:** `'development' | 'production'`
- **Default:** `'development'` for serve, `'production'` for build.

The mode to run the bundler in. This affects various optimizations and defaults throughout the bundler.

```ts
export default defineConfig({
  mode: 'production',
});
```

## entry

- **Type:** `string`
- **Default:** `'index.js'`

The entry point file for your application.

```ts
export default defineConfig({
  entry: 'index.js',
});
```

## resolver

Module resolution configuration.

<Callout>
`resolver` option is extends Rolldown's [`InputOptions['resolve']`](https://github.com/rolldown/rolldown/blob/v1.0.0-beta.57/packages/rolldown/src/binding.d.cts#L1905).
</Callout>

### resolver.sourceExtensions

- **Type:** `string[]`
- **Default:** `['ts', 'tsx', 'js', 'jsx', 'mjs', 'cjs', 'json']`

File extensions to resolve as source files.

### resolver.assetExtensions

- **Type:** `string[]`
- **Default:** `['bmp', 'gif', 'jpg', 'jpeg', 'png', 'webp', 'avif', 'ico', 'icns', 'icxl']`

File extensions to resolve as asset files.

### resolver.mainFields

- **Type:** `string[]`
- **Default:** `['react-native', 'browser', 'main']`

Fields to check in package.json when resolving packages.

### resolver.conditionNames

- **Type:** `string[]`
- **Default:** `['react-native', 'import', 'require']`

Condition names for exports field resolution in package.json.

### resolver.preferNativePlatform

- **Type:** `boolean`
- **Default:** `true`

If `true`, resolver will resolve platform-specific files with `.native` suffix.

For example:

- **true**: `index.android.js` → `index.native.js` → `index.js`
- **false**: `index.android.js` → `index.js`

### resolver.symlinks

- **Type:** `boolean`
- **Default:** `true`

Whether to resolve symlinks to their symlinked location.

## transformer

Source code transformation configuration.

<Callout>
`transformer` option is extends Rolldown's [`TransformOptions`](https://github.com/rolldown/rolldown/blob/v1.0.0-beta.57/packages/rolldown/src/binding.d.cts#L1171).
</Callout>

### transformer.svg

- **Type:** `boolean`
- **Default:** `true`

Transform SVG asset files to React components using `@svgr/core`.

See [SVG Support](/docs/features/svg) for more details.

### transformer.flow

Flow type syntax transformation configuration.

`flow.filter`

- **Type:** `HookFilter | TopLevelFilterExpression[]`
- **Default:** `{ id: /\.jsx?$/, code: /@flow/ }`

Filter for Flow transformation pipeline. Uses Rolldown's [hook filter feature](https://rolldown.rs/apis/plugin-hook-filters) to determine which files should be processed.

See [Flow Support](/docs/features/flow) for more details.

### transformer.babel

Custom Babel transformation rules.

`babel.rules`

- **Type:** `BabelTransformRule[]`

Define custom Babel transformation rules for specific files.

```ts
export default defineConfig({
  transformer: {
    babel: {
      rules: [
        {
          filter: { id: /\.custom\.js$/ },
          options: {
            plugins: ['custom-babel-plugin'],
          },
        },
      ],
    },
  },
});
```

**BabelTransformRule:**

```ts
interface BabelTransformRule {
  filter?: HookFilter | TopLevelFilterExpression[];
  options: babel.TransformOptions | ((code: string, id: string) => babel.TransformOptions);
}
```

### transformer.swc

Custom SWC transformation rules.

`swc.rules`

- **Type:** `SwcTransformRule[]`

Define custom SWC transformation rules for specific files.

```ts
export default defineConfig({
  transformer: {
    swc: {
      rules: [
        {
          filter: { id: /\.custom\.ts$/ },
          options: {
            jsc: {
              parser: {
                syntax: 'typescript',
              },
            },
          },
        },
      ],
    },
  },
});
```

**SwcTransformRule:**

```ts
interface SwcTransformRule {
  filter?: HookFilter | TopLevelFilterExpression[];
  options: swc.Options | ((code: string, id: string) => swc.Options);
}
```

## serializer

Output serialization configuration.

### serializer.prelude

- **Type:** `string[]`
- **Default:** `['react-native/Libraries/Core/InitializeCore']`

Paths to prelude files that are imported at the top of the entry module.

By default, Rollipop includes React Native's `InitializeCore` module, which sets up the initial JavaScript environment. This module is essential for React Native applications to function properly.

```ts
export default defineConfig({
  serializer: {
    prelude: ['./src/setup.js'],
  },
});
```

**Note:** If you override this option, make sure to include the default prelude if your app relies on React Native's initialization:

```ts
export default defineConfig({
  serializer: {
    prelude: ['./src/custom-setup.js'],
  },
});
```

### serializer.polyfills

- **Type:** `Polyfill[]`
- **Default:** Polyfills from `react-native/rn-get-polyfills`

Polyfills to include in the output bundle. Polyfills are injected at the top of the output bundle.

By default, Rollipop includes all polyfills provided by React Native's `rn-get-polyfills` module. These polyfills are automatically processed to remove Flow type annotations and wrapped in IIFE (Immediately Invoked Function Expression) format.

```ts
export default defineConfig({
  serializer: {
    polyfills: [
      // String path
      './polyfills/console.js',
      // With code
      {
        type: 'iife',
        code: '(function() { /* polyfill code */ })()',
      },
      // With path
      {
        type: 'plain',
        path: './polyfills/promise.js',
      },
    ],
  },
});
```

**Polyfill Types:**

- `'iife'`: Wraps the polyfill code in an IIFE `(function() { ... })()`
- `'plain'`: Injects the polyfill code as-is without wrapping

**Polyfill Formats:**

You can specify polyfills in three ways:

1. **String path**: Simple file path

   ```ts
   polyfills: ['./polyfills/custom.js']
   ```

2. **Object with code**: Inline polyfill code

   ```ts
   polyfills: [
     {
       type: 'iife',
       code: 'console.log("Polyfill loaded");',
     },
   ]
   ```

3. **Object with path**: File path with explicit type
   ```ts
   polyfills: [
     {
       type: 'plain',
       path: './polyfills/global.js',
     },
   ]
   ```

## watcher

File watcher configuration for development mode.

<Callout>
`watcher` option is extends Rolldown's [`DevWatchOptions`](https://github.com/rolldown/rolldown/blob/v1.0.0-beta.57/packages/rolldown/src/binding.d.cts#L1718).
</Callout>

### watcher.skipWrite

- **Type:** `boolean`
- **Default:** `true`

Skip writing output files during watch mode.

### watcher.useDebounce

- **Type:** `boolean`
- **Default:** `true`

Use debouncing for file change events.

### watcher.debounceDuration

- **Type:** `number`
- **Default:** `50`

Debounce duration in milliseconds.

## devMode

Development mode configuration.

### devMode.hmr

- **Type:** `boolean | HmrConfig`
- **Default:** `true`

Enable or configure Hot Module Replacement (HMR).

```ts
export default defineConfig({
  devMode: {
    hmr: true,
  },
});
```

**Advanced HMR Configuration:**

```ts
export default defineConfig({
  devMode: {
    hmr: {
      runtimeImplement: './custom-hmr-runtime.js',
      clientImplement: './custom-hmr-client.js',
    },
  },
});
```

**HmrConfig:**

```ts
interface HmrConfig {
  runtimeImplement?: string;  // Custom HMR runtime source
  clientImplement?: string;    // Custom HMR client source
}
```

## reactNative

React Native specific configuration.

### reactNative.codegen

React Native Codegen configuration.

`reactNative.codegen.filter`

- **Type:** `HookFilter | TopLevelFilterExpression[]`
- **Default:** `{ code: /\bcodegenNativeComponent</ }`

Filter for codegen transformation pipeline. Only files matching this filter will be processed for React Native Codegen.

```ts
export default defineConfig({
  reactNative: {
    codegen: {
      filter: {
        // Process files containing `codegenNativeComponent<`
        code: /\bcodegenNativeComponent</,
      },
    },
  },
});
```

You can customize to match additional patterns:

```ts
export default defineConfig({
  reactNative: {
    codegen: {
      filter: {
        // Match files with codegen functions
        code: /(codegenNativeComponent|TurboModuleRegistry\.get)/,
      },
    },
  },
});
```

### reactNative.assetRegistryPath

- **Type:** `string`
- **Default:** `'react-native/Libraries/Image/AssetRegistry.js'`

Path to the asset registry module.

## plugins

- **Type:** `Plugin[]`

Array of Rollipop plugins. See [Plugin API](/docs/apis/plugin) for more details.

```ts
import myPlugin from 'rollipop-plugin-example';

export default defineConfig({
  plugins: [myPlugin()],
});
```

## terminal

Terminal output configuration.

### terminal.status

- **Type:** `'none' | 'compat' | 'progress'`
- **Default:** `isTTY ? 'progress' : 'compat'`

Terminal status display mode:

- `'none'`: No status display
- `'progress'`: Interactive progress display (when TTY is available)
- `'compat'`: Compatible mode for non-TTY environments

### terminal.extraCommands

- **Type:** `InteractiveCommand[]`

Add custom interactive commands to the development server's interactive mode.

```ts
export default defineConfig({
  terminal: {
    extraCommands: [
      {
        key: 'c',
        description: 'Clear console',
        handler() {
          console.clear();
        },
      },
    ],
  },
});
```

**InteractiveCommand:**

```ts
interface InteractiveCommand {
  key: string;
  shift?: boolean;
  description: string | (() => string);
  handler: (this: InteractiveCommandContext) => void;
}

interface InteractiveCommandContext {
  server: DevServer;
  logger: Logger;
}
```

## reporter

- **Type:** `Reporter`
- **Default:** `ClientLogReporter`

Custom reporter for build events. Implement the `Reporter` interface to create custom reporters.

See [Reporter](/docs/features/reporter) for more details.

## envDir

- **Type:** `string`
- **Default:** `config.root`

Directory to load environment files from.

```ts
export default defineConfig({
  envDir: './envFiles',
});
```

## envPrefix

- **Type:** `string`
- **Default:** `'ROLLIPOP_'`

Prefix for environment variables to be included in the bundle.

```ts
export default defineConfig({
  envPrefix: 'MY_APP_',
});
```
